<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>è‰²ç›²æŒ‘æˆ˜</title>
    <style>
        :root {
            /* äº®è‰²ä¸»é¢˜ï¼šæ¢¦å¹»ç²‰çº¢æ¸å˜ */
            --bg-gradient-light: linear-gradient(135deg, #ffd1e3, #fff0f5, #ffeef8);
            --text-color-light: #4a0d2a;
            --container-bg-light: #fff5f9;
            --shadow-color-light: rgba(255, 105, 157, 0.2);
            --button-bg-light: #fff0f8;
            --button-text-light: #ff6b9d;
            --result-bg-light: rgba(255,240,248,.8);

            /* æš—è‰²ä¸»é¢˜ï¼šGrokå¼æ·±é»‘ + ç²‰è‰²éŸµå‘³ï¼ˆæ·±é»‘åº• + æ·¡ç²‰æ¸å˜ï¼‰ */
            --bg-gradient-dark: linear-gradient(135deg, #0a0408, #14080d, #1a0b12);
            --text-color-dark: #ff99c8; /* äº®ç²‰æ–‡å­— */
            --container-bg-dark: #0a0408; /* çº¯é»‘æ·±ç´«çº¢ */
            --shadow-color-dark: rgba(255, 64, 129, 0.5);
            --button-bg-dark: #1a0b12; /* æ·±é»‘æŒ‰é’®åº• */
            --button-text-dark: #ff99c8; /* äº®ç²‰æ–‡å­— */
            --result-bg-dark: rgba(10, 4, 8, 0.85); /* åŠé€æ˜æ·±é»‘ */

            --primary-color: #ff6b9d;
            --primary-color-dark: #ff4081;
            --border-color: #ff8fb1;
        }
        body {
            margin: 0;
            font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
            background: var(--bg-gradient-light);
            color: var(--text-color-light);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            transition: all 0.5s ease;
            overflow: hidden; /* ç§»åŠ¨ç«¯é˜²æ»šåŠ¨æº¢å‡º */
        }
        body.dark-theme {
            background: var(--bg-gradient-dark);
            color: var(--text-color-dark);
        }
        #theme-toggle {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 8px 16px;
            border: none;
            border-radius: 50px; /* æ›´åœ†æ¶¦ */
            background: var(--primary-color);
            color: white;
            cursor: pointer;
            font-size: 0.9rem;
            box-shadow: 0 3px 10px rgba(255,107,157,.25);
            transition: all 0.3s ease;
            z-index: 10;
        }
        #theme-toggle:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 14px rgba(255,107,157,.35);
        }
        .dark-theme #theme-toggle {
            background: var(--primary-color-dark);
            box-shadow: 0 3px 10px rgba(255,64,129,.35);
        }
        @media (max-width: 600px) {
            #theme-toggle {
                top: auto;
                bottom: 15px;
                right: 50%;
                transform: translateX(50%);
                padding: 10px 24px;
                font-size: 1rem; /* ç§»åŠ¨ç«¯åŠ å¤§ */
            }
            #game-container {
                padding: 20px;
                max-width: 90%;
            }
            #color-display {
                width: 160px;
                height: 160px;
            }
            button {
                padding: 12px 20px;
                font-size: 1rem;
                min-width: 100px;
            }
            .options {
                gap: 10px;
            }
        }
        h1 {
            margin-bottom: 20px;
            font-size: 2.4rem;
            color: #ff6b9d;
            text-shadow: 0 1px 3px rgba(255,107,157,.3);
            letter-spacing: 1px;
        }
        #game-container {
            background: var(--container-bg-light);
            padding: 35px;
            border-radius: 16px;
            box-shadow: 0 6px 25px var(--shadow-color-light);
            text-align: center;
            max-width: 600px;
            width: 100%;
            transition: all 0.5s ease;
        }
        .dark-theme #game-container {
            background: var(--container-bg-dark);
            box-shadow: 0 6px 25px var(--shadow-color-dark);
        }
        #color-display {
            width: 200px;
            height: 200px;
            margin: 0 auto 28px;
            border-radius: 50%;
            border: 5px solid var(--border-color);
            transition: all .3s ease;
            box-shadow: 0 0 20px rgba(255,107,157,.5);
        }
        #color-display:hover {
            transform: scale(1.05);
            box-shadow: 0 0 30px rgba(255,107,157,.7);
        }
        .options {
            display: flex;
            justify-content: center;
            gap: 16px;
            flex-wrap: wrap;
        }
        button {
            padding: 14px 24px;
            font-size: 1.05rem;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all .2s ease;
            background: var(--button-bg-light);
            color: var(--button-text-light);
            font-weight: bold;
            box-shadow: 0 3px 8px rgba(255,107,157,.2);
            min-width: 120px;
        }
        .dark-theme button {
            background: var(--button-bg-dark);
            color: var(--button-text-dark);
        }
        button:hover { 
            transform: translateY(-3px) scale(1.05); 
            background: #ff8fb1;
            color: #fff;
            box-shadow: 0 6px 15px rgba(255,107,157,.3);
        }
        button.correct { 
            background: #ff6b9d; 
            color: #fff; 
            animation: pulse 0.6s ease;
        }
        button.wrong { 
            background: #ff4757; 
            color: #fff; 
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.18); }
            100% { transform: scale(1); }
        }
        #score, #timer {
            margin-top: 22px;
            font-size: 1.25rem;
            font-weight: bold;
            color: #ff6b9d;
        }
        #restart-judgement {
            margin-top: 18px;
            background: #ff6b9d;
            color: #fff;
            padding: 15px 32px;
            font-size: 1.15rem;
            border-radius: 50px;
            box-shadow: 0 4px 12px rgba(255,107,157,.3);
        }
        #restart-judgement:hover { 
            background: #ff4081; 
            transform: translateY(-2px);
        }
        #result {
            display: none;
            margin-top: 25px;
            font-size: 1.55rem;
            line-height: 1.9;
            text-shadow: 0 1px 2px rgba(255,105,157,.3);
            padding: 18px;
            background: var(--result-bg-light);
            border-radius: 14px;
            border: 1px dashed #ff8fb1;
            max-width: 90%;
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.5s ease;
        }
        .dark-theme #result {
            background: var(--result-bg-dark);
            color: #ff99c8;
            border-color: #ff6b9d;
        }
        #result.show {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }
        .comment-line {
            margin: 8px 0;
            padding: 6px 0;
            border-bottom: 1px dotted #ffb6d9;
            color: #ff8fb1;
        }
        .dark-theme .comment-line {
            border-bottom-color: #ff6b9d;
            color: #ffb6d9;
        }
        .comment-line:last-child {
            border-bottom: none;
        }
    </style>
</head>
<body>

<button id="theme-toggle">ğŸŒ™ æš®è‰²ç¼ ç»µ</button>

<div id="game-container">
    <h1>è‰²ç›²æŒ‘æˆ˜</h1>

    <div id="color-judgement" class="active">
        <div id="color-display"></div>
        <div class="options" id="options"></div>
        <div id="score">å¾—åˆ†ï¼š0</div>
        <div id="timer">å‰©ä½™æ—¶é—´ï¼š60ç§’</div>
        <div id="result"></div>
        <button id="restart-judgement">äººå®¶è¿˜æƒ³è¦ï¼</button>
    </div>
</div>

<script>
const colorDisplay = document.getElementById('color-display');
const optionsContainer = document.getElementById('options');
const scoreDisplay = document.getElementById('score');
const timerDisplay = document.getElementById('timer');
const resultDisplay = document.getElementById('result');
const restartJudgement = document.getElementById('restart-judgement');

let judgementScore = 0;
let currentColor = '';
let judgementOptions = [];
let gameTimer;
let timeLeft = 60;
const FEEDBACK_DELAY = 320;

// ç²¾é€‰32ç§è‰²æ°”åè¯
const rawColorMap = {
    'å¥¶ç™½çˆ±æ¶²':'#FFFAFA','å¤„å¥³è†œç²‰':'#FFC1CC','æ½®çº¢å°ç©´':'#FF69B4','æ¹¿æ¶¦æ¨±å”‡':'#FF1493',
    'ç²¾æ¶²ç™½æµŠ':'#FFFFFF','é»‘ä¸æ·±æ¸Š':'#000000','åˆå¤œè“ç©´':'#191970','è“è‰²è‚‰æ£’':'#0000FF',
    'å¤©è“æ·«æ¶²':'#87CEEB','é’è‰²æ½®å¹':'#00FFFF','è–„è·å¥¶å¤´':'#F5FFFA','æ˜¥ç»¿å«©è‚‰':'#00FF7F',
    'é…¸æ©™ç»¿æ£’':'#32CD32','é»„è‰²é«˜æ½®':'#FFFF00','é‡‘è‰²ç²¾æ¶²':'#FFD700','æ©™è‰²çˆ±æ¶²':'#FFA500',
    'çŠç‘šæ½®çº¢':'#FF7F50','ç•ªèŒ„çº¢å”‡':'#FF6347','èµ¤çº¢è‚‰å£':'#FF0000','è‰³ç²‰å°ç©´':'#FF69B4',
    'ç´«ç½—å…°æ¹¿':'#EE82EE','æ´‹çº¢å–·æ¶²':'#FF00FF','æå­å«©è‚‰':'#DDA0DD','æ·±ç´«çˆ±ç—•':'#9400D3',
    'æ —è‰²è‚‰æ£’':'#800000','å·§å…‹åŠ›æ±':'#D2691E','å°éº¦ä¹³æ±':'#F5DEB3','é²‘é±¼æ½®çº¢':'#FA8072',
    'ç«ç‘°é«˜æ½®':'#BC8F8F','çŒ©çº¢çˆ±æ¶²':'#DC143C','æ©„æ¦„å«©ç©´':'#808000','é“¶è‰²æ½®å¹':'#C0C0C0'
};

const colorMap = {};
Object.keys(rawColorMap).forEach(k => {
    const key = k.trim();
    if (!key) return;
    colorMap[key] = rawColorMap[k];
});

const colorNames = Object.keys(colorMap);

function randomColor() {
    return colorNames[Math.floor(Math.random() * colorNames.length)];
}

function generateOptions(correct) {
    const opts = [correct];
    while (opts.length < 4) {
        const rand = randomColor();
        if (!opts.includes(rand)) opts.push(rand);
    }
    for (let i = opts.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [opts[i], opts[j]] = [opts[j], opts[i]];
    }
    return opts;
}

function startJudgementRound() {
    if (timeLeft <= 0) return;
    currentColor = randomColor();
    colorDisplay.style.backgroundColor = colorMap[currentColor];
    colorDisplay.style.transform = 'scale(1.05)';

    judgementOptions = generateOptions(currentColor);
    optionsContainer.innerHTML = '';

    judgementOptions.forEach(name => {
        const btn = document.createElement('button');
        btn.textContent = name;
        btn.addEventListener('click', () => checkJudgementAnswer(name, btn));
        optionsContainer.appendChild(btn);
    });

    setTimeout(() => {
        colorDisplay.style.transform = 'scale(1)';
    }, 200);
}

function checkJudgementAnswer(selected, btn) {
    if (btn.disabled || timeLeft <= 0) return;

    const buttons = optionsContainer.querySelectorAll('button');
    buttons.forEach(b => b.disabled = true);

    if (selected === currentColor) {
        btn.classList.add('correct');
        judgementScore++;
    } else {
        btn.classList.add('wrong');
        judgementScore = Math.max(0, judgementScore - 1);
        buttons.forEach(b => {
            if (b.textContent === currentColor) b.classList.add('correct');
        });
    }
    scoreDisplay.textContent = `å¾—åˆ†ï¼š${judgementScore}`;

    setTimeout(() => {
        buttons.forEach(b => {
            b.disabled = false;
            b.className = '';
        });
        startJudgementRound();
    }, FEEDBACK_DELAY);
}

// æ‰©å±•è¯„è¯­åº“
const comments = {
    perfect: [
        'å“¼å“¼â€”â€”ä½ è¿™è‰²é¬¼ï¼Œçœ¼ç›æ¯”äººå®¶çš„å°è£¤è£¤è¿˜å°–ï¼å…¨çœ‹å…‰å…‰å•¦ï½ä¸‹æ¬¡è¦ä¸è¦äººå®¶è„±å¾—æ›´å½»åº•ç‚¹ï¼Ÿ(â„ â„â€¢â„Ï‰â„â€¢â„ â„)',
        'å‘€ï¼å¤§å“¥å“¥å¥½å‰å®³ï¼äººå®¶çš„å°ç©´éƒ½è¢«ä½ çœ‹ç©¿äº†å‘¢ï½å†æ¥ä¸€æ¬¡ï¼Œäººå®¶è¦é«˜æ½®åˆ°å–·æ°´å“¦ï¼(ã€ƒï¿£Ï‰ï¿£ã€ƒã‚',
        'å‘œå“‡â€”â€”ä½ è¿™å˜æ€ï¼è¿äººå®¶æœ€æ•æ„Ÿçš„å°è±†è±†éƒ½æ‰¾å¾—åˆ°ï¼Ÿäººå®¶å·²ç»æ¹¿é€å•¦ï¼(//â–½//)',
        'å˜»å˜»â€”â€”ä½ èµ¢äº†ï¼äººå®¶çš„å°ç§˜å¯†å…¨è¢«ä½ å‘ç°äº†ï½ä½œä¸ºå¥–åŠ±ï¼Œè¦ä¸è¦èˆ”èˆ”äººå®¶çš„å¥¶å¤´ï¼Ÿ(ï¾‰*ï¾Ÿï½°ï¾Ÿ)ï¾‰',
        'å•Šå•Šâ€”â€”ä½ å¤ªæ£’äº†ï¼äººå®¶è¦è¢«ä½ çœ‹åŒ–æ‰äº†ï½ä¸‹æ¬¡è¦ä¸è¦è¯•è¯•ç”¨èˆŒå¤´æ‰¾é¢œè‰²ï¼Ÿ(ï½¡â™¥â€¿â™¥ï½¡)',
        'å“¼â€”â€”ä½ è¿™å¤§è‰²ç‹¼ï¼äººå®¶çš„å°ç©´æ±éƒ½è¢«ä½ çŒœå‡ºæ¥äº†å‘¢ï½äººå®¶å¥½å®³ç¾å“¦ï¼(â„ â„>â„ â–½ â„<â„ â„)',
        'å‘€å‘€â€”â€”å¥½æ£’æ£’ï¼äººå®¶çš„å°è±†è±†éƒ½ç¡¬èµ·æ¥äº†ï¼Œå…¨æ˜¯è¢«ä½ çœ‹å‡ºæ¥çš„ï½(ã€ƒï¾‰Ï‰ï¾‰)',
        'å‘œå‘œâ€”â€”ä½ èµ¢å•¦ï¼äººå®¶çš„å°ç§˜å¯†éƒ½è¢«ä½ å‘ç°äº†ï½ä¸‹æ¬¡äººå®¶è¦ç©¿æ›´å°‘çš„å“¦ï¼(ç¬ÂºÏ‰Âºç¬)'
    ],
    // ... (å…¶ä»–çº§åˆ«è¯„è¯­ä¿æŒä¸å˜)
    excellent: [
        'å‘€â€”â€”å¤§å“¥å“¥å¥½æ£’æ£’å“¦ï¼äººå®¶çš„å°ç§˜å¯†éƒ½è¢«ä½ å‘ç°äº†å‘¢ï½å†å¤šæ‘¸æ‘¸ï¼Œäººå®¶ä¼šæ›´æ¹¿æ¹¿çš„å“¦ï¼Ÿ(ã€ƒï¿£Ï‰ï¿£ã€ƒ)',
        'å“¼â€”â€”è¿˜ä¸é”™å˜›ï¼äººå®¶çš„å°é¢œè‰²éƒ½è¢«ä½ èˆ”å‡ºæ¥äº†å‘¢ï½ç»§ç»­åŠ æ²¹ï¼Œäººå®¶è¦é«˜æ½®å•¦ï¼(//Ï‰//)',
        'å˜»å˜»â€”â€”ä½ è¿™è‰²ç‹¼ï¼è¿äººå®¶æ½®çº¢çš„å°ç©´éƒ½è®¤å¾—å‡ºæ¥ï¼Ÿå†æ¥ä¸€æ¬¡ï¼Œäººå®¶è¦å¤¹ç´§ä½ å“¦ï½(ï¾‰Â´ Ğ· `)ãƒ',
        'å‘€ï¼äººå®¶çš„å°ç©´æ±éƒ½è¢«ä½ çœ‹å…‰äº†å‘¢ï½å†å¤šçŒœå¯¹å‡ é¢˜ï¼Œäººå®¶å°±è®©ä½ æ‘¸æ‘¸çœ‹ï¼(ç¬Âº è‰¸Âºç¬)',
        'å‘œâ€”â€”ä½ å¥½åï¼äººå®¶æœ€æ•æ„Ÿçš„åœ°æ–¹éƒ½è¢«ä½ å‘ç°äº†ï½å†æ¥ä¸€æ¬¡ï¼Œäººå®¶è¦å«å‡ºå£°äº†ï¼(ã€ƒâ–½ã€ƒ)',
        'å“¼å“¼â€”â€”ä¸é”™å“¦ï¼äººå®¶çš„å°ç©´éƒ½æ¹¿æˆè¿™æ ·äº†ä½ è¿˜çŒœå¯¹ï½äººå®¶è¦å¥–åŠ±ä½ ï¼(ï½¡â€¢ã……â€¢ï½¡)â™¡',
        'å‘€å‘€â€”â€”å¥½å‰å®³ï¼äººå®¶çš„å°è±†è±†éƒ½è¢«ä½ æ‰¾å‡ºæ¥äº†å‘¢ï½äººå®¶å¥½ç—’å“¦ï¼(â„ â„â€¢â„-â„â€¢â„ â„)',
        'å‘œå‘œâ€”â€”ä½ è¿™åè›‹ï¼äººå®¶çš„å°ç§˜å¯†éƒ½è¢«ä½ çŒœä¸­äº†ï½ä¸‹æ¬¡äººå®¶è¦æ›´éš¾å“¦ï¼(ã€ƒï¾‰Ï‰ï¾‰)'
    ],
    good: [
        'å˜»å˜»â€”â€”è¿˜ä¸é”™å˜›ï¼äººå®¶çš„å°é¢œè‰²éƒ½è¢«ä½ èˆ”å‡ºæ¥äº†å‘¢ï½ç»§ç»­åŠ æ²¹ï¼Œäººå®¶è¦é«˜æ½®å•¦ï¼(ã€ƒï¿£Ï‰ï¿£ã€ƒã‚',
        'å“¼â€”â€”å°±è¿™ï¼Ÿäººå®¶çš„å°ç¼ç¼ä½ éƒ½çœ‹ä¸æ¸…å—ï¼Ÿå†åŠªåŠ›ç‚¹å˜›ï¼Œä¸ç„¶äººå®¶è¦ç”Ÿæ°”äº†å“¦ï½(ç¬ÂºÏ‰Âºç¬)',
        'å‘€â€”â€”ä½ è¿™ç¬¨è›‹ï¼äººå®¶çš„å°ç©´éƒ½çº¢æˆè¿™æ ·äº†ä½ è¿˜è®¤é”™ï¼Ÿå†æ¥ä¸€æ¬¡ï¼Œäººå®¶è¦æƒ©ç½šä½ ï¼(â„ â„>â„ â–½ â„<â„ â„)',
        'å‘œâ€”â€”ä½ å¥½ç¬¨ï¼äººå®¶çš„å°è±†è±†éƒ½ç¡¬èµ·æ¥äº†ä½ éƒ½æ‰¾ä¸åˆ°ï¼Ÿå¿«ç‚¹èˆ”å¯¹åœ°æ–¹å•¦ï¼(//â–½//)',
        'å“¼å“¼â€”â€”è¿˜è¡Œå•¦ï¼äººå®¶çš„å°ç©´æ±éƒ½æµå‡ºæ¥äº†ä½ æ‰è®¤å‡ºæ¥ï¼Ÿä¸‹æ¬¡è¦å¿«ä¸€ç‚¹å“¦ï¼(ï¾‰*ï¾Ÿï½°ï¾Ÿ)ï¾‰',
        'å‘€å‘€â€”â€”ä¸€èˆ¬èˆ¬å•¦ï¼äººå®¶çš„å°ç©´éƒ½æ¹¿æ¹¿çš„äº†ä½ è¿˜çŒœé”™ï½å¤šç»ƒä¹ å“¦ï¼(ã€ƒï¾‰Ï‰ï¾‰)',
        'å‘œå‘œâ€”â€”ä½ è¿™å°ç¬¨è›‹ï¼äººå®¶çš„å°è±†è±†éƒ½è¿™ä¹ˆæ˜æ˜¾äº†ï½å¿«çŒœå¯¹å˜›ï¼(ï½¡â™¥â€¿â™¥ï½¡)',
        'å“¼â€”â€”åŠ æ²¹å•¦ï¼äººå®¶çš„å°ç§˜å¯†å·®ç‚¹è¢«ä½ çŒœä¸­ï½ä¸‹æ¬¡äººå®¶è¦è—å¾—æ›´æ·±å“¦ï¼(//Ï‰//)'
    ],
    average: [
        'å“¼â€”â€”å°±è¿™ï¼Ÿäººå®¶çš„å°ç¼ç¼ä½ éƒ½çœ‹ä¸æ¸…å—ï¼Ÿå†åŠªåŠ›ç‚¹å˜›ï¼Œä¸ç„¶äººå®¶è¦ç”Ÿæ°”äº†å“¦ï½(ã€ƒâ–½ã€ƒ)',
        'å‘œå‘œâ€”â€”ä½ è¿™ç¬¨è›‹ï¼äººå®¶çš„ç²‰å«©å°è±†è±†ä½ éƒ½æ‰¾ä¸åˆ°å—ï¼Ÿå¿«ç‚¹èˆ”å¯¹åœ°æ–¹å•¦ï¼(ï¾‰Â´ Ğ· `)ãƒ',
        'æ¬¸â€”â€”ä½ è¿™è‰²ç‹¼ï¼äººå®¶çš„å°ç©´éƒ½æ¹¿æˆè¿™æ ·äº†ä½ è¿˜è®¤é”™ï¼Ÿå†æ¥ä¸€æ¬¡ï¼Œä¸ç„¶äººå®¶è¦å“­äº†ï¼(ç¬Âº è‰¸Âºç¬)',
        'å‘€â€”â€”ä½ å¥½åï¼äººå®¶çš„å°ç©´æ±éƒ½æµåˆ°å¤§è…¿äº†ä½ æ‰å‘ç°ï¼Ÿä¸‹æ¬¡è¦æ—©ç‚¹é—»åˆ°å“¦ï¼(ï½¡â€¢ã……â€¢ï½¡)â™¡',
        'å“¼â€”â€”è¿˜å·®å¾—è¿œå‘¢ï¼äººå®¶çš„å°ç©´éƒ½çº¢è‚¿äº†ä½ éƒ½è®¤ä¸å‡ºï¼Ÿå¤šç»ƒä¹ å•¦ï¼Œå°ç¬¨è›‹ï¼(â„ â„â€¢â„-â„â€¢â„ â„)',
        'å‘œâ€”â€”ä½ è¿™å°åºŸç‰©ï¼äººå®¶çš„å°è±†è±†éƒ½ç¡¬ç¡¬çš„äº†ï½å¿«çŒœå¯¹ä¸ç„¶äººå®¶ç”Ÿæ°”ï¼(ã€ƒï¾‰Ï‰ï¾‰)',
        'å‘€å‘€â€”â€”ä¸€èˆ¬å“¦ï¼äººå®¶çš„å°ç§˜å¯†ä½ åªçŒœå¯¹ä¸€åŠï½ä¸‹æ¬¡è¦å…¨çŒœä¸­æ‰è¡Œï¼(â„ â„>â„ â–½ â„<â„ â„)',
        'å“¼å“¼â€”â€”å†åŠªåŠ›ç‚¹å•¦ï¼äººå®¶çš„å°ç©´æ±éƒ½æ»´ä¸‹æ¥äº†ä½ è¿˜é”™ï½äººå®¶è¦æƒ©ç½šä½ ï¼(//â–½//)'
    ],
    poor: [
        'å‘œå‘œâ€”â€”ä½ è¿™ç¬¨è›‹ï¼äººå®¶çš„ç²‰å«©å°è±†è±†ä½ éƒ½æ‰¾ä¸åˆ°å—ï¼Ÿå¿«ç‚¹èˆ”å¯¹åœ°æ–¹å•¦ï¼(ç¬ÂºÏ‰Âºç¬)',
        'æ¬¸â€”â€”ï¼Ÿä½ çœ¼ç›æ˜¯åæ‰äº†å—ï¼Ÿäººå®¶å…¨è£¸åœ¨ä½ é¢å‰ä½ éƒ½çœ‹ä¸è§ï¼Ÿè‰²ç›²å°åºŸç‰©ï½(ã€ƒï¿£Ï‰ï¿£ã€ƒã‚',
        'å“¼â€”â€”ä½ è¿™åºŸç‰©ï¼äººå®¶çš„å°ç©´éƒ½å¼ å¼€ç»™ä½ çœ‹äº†ä½ è¿˜è®¤é”™ï¼Ÿä¸‹æ¬¡è®°å¾—å¸¦æ”¾å¤§é•œï¼(//Ï‰//)',
        'å‘€â€”â€”ä½ è¿™è‰²ç›²ï¼äººå®¶çš„å°ç©´æ±éƒ½å–·åˆ°ä½ è„¸ä¸Šäº†ä½ éƒ½ä¸çŸ¥é“ï¼Ÿå¤ªç¬¨å•¦ï¼(ï¾‰*ï¾Ÿï½°ï¾Ÿ)ï¾‰',
        'å‘œå“‡â€”â€”ä½ è¿äººå®¶çš„å°ç©´é¢œè‰²éƒ½è®¤ä¸å‡ºï¼Ÿäººå®¶è¦å“­äº†ï¼å¿«å»æ£€æŸ¥çœ¼ç›å•¦ï¼(ï½¡â™¥â€¿â™¥ï½¡)',
        'å“¼å“¼â€”â€”ä½ è¿™å°ç¬¨è›‹ï¼äººå®¶çš„å°è±†è±†éƒ½è¿™ä¹ˆæ˜æ˜¾äº†ï½å¿«é†’é†’å“¦ï¼(â„ â„â€¢â„Ï‰â„â€¢â„ â„)',
        'å‘€å‘€â€”â€”å¤ªå·®åŠ²äº†ï¼äººå®¶çš„å°ç§˜å¯†ä½ å…¨çŒœé”™ï½äººå®¶è¦ç”Ÿæ°”äº†ï¼(ã€ƒï¾‰Ï‰ï¾‰)',
        'å‘œâ€”â€”ä½ è¿™è‰²ç›²åºŸç‰©ï¼äººå®¶çš„å°ç©´éƒ½æ¹¿é€äº†ä½ è¿˜é”™ï½ä¸‹æ¬¡åˆ«æ¥äº†ï¼(â„ â„>â„ â–½ â„<â„ â„)'
    ],
    terrible: [
        'æ¬¸â€”â€”ï¼Ÿä½ çœ¼ç›æ˜¯åæ‰äº†å—ï¼Ÿäººå®¶å…¨è£¸åœ¨ä½ é¢å‰ä½ éƒ½çœ‹ä¸è§ï¼Ÿè‰²ç›²å°åºŸç‰©ï½ä¸‹æ¬¡è®°å¾—å¸¦æ”¾å¤§é•œæ¥èˆ”å“¦ï¼(//â–½//)',
        'å“¼â€”â€”ä½ è¿™å¤§åºŸç‰©ï¼äººå®¶çš„å°ç©´éƒ½æ¹¿æˆä¸€ç‰‡äº†ä½ è¿˜è®¤é”™ï¼Ÿè¿ç‹—éƒ½ä¸å¦‚ï¼(ï¾‰Â´ Ğ· `)ãƒ',
        'å‘€â€”â€”ä½ è¿™è‰²ç›²ï¼äººå®¶çš„å°ç©´éƒ½çº¢åˆ°æ»´è¡€äº†ä½ éƒ½çœ‹ä¸è§ï¼Ÿå¿«æ»šå»åŒ»é™¢ï¼(ç¬Âº è‰¸Âºç¬)',
        'å‘œâ€”â€”ä½ è¿™ç¬¨è›‹ï¼äººå®¶çš„å°è±†è±†éƒ½ç¡¬åˆ°å‘ç—›äº†ä½ éƒ½æ‰¾ä¸åˆ°ï¼Ÿå¤ªæ²¡ç”¨äº†ï¼(ï½¡â€¢ã……â€¢ï½¡)â™¡',
        'å˜»â€”â€”ä½ è¿äººå®¶çš„å°ç©´é¢œè‰²éƒ½è®¤ä¸å‡ºï¼Ÿäººå®¶è¦ç¬‘æ­»äº†ï¼ä¸‹æ¬¡åˆ«æ¥äº†ï¼Œå°åºŸç‰©ï¼(â„ â„â€¢â„-â„â€¢â„ â„)',
        'å“¼å“¼â€”â€”ä½ è¿™è¶…çº§ç¬¨è›‹ï¼äººå®¶çš„å°ç§˜å¯†ä½ å…¨è’™ä¸å¯¹ï½äººå®¶ç¬‘cryäº†ï¼(ã€ƒï¾‰Ï‰ï¾‰)',
        'å‘€å‘€â€”â€”å¤ªåºŸäº†ï¼äººå®¶çš„å°ç©´æ±éƒ½æµä¸€åœ°äº†ä½ è¿˜é”™ï½å¿«å»æ£€æŸ¥å§ï¼(â„ â„>â„ â–½ â„<â„ â„)',
        'å‘œå‘œâ€”â€”ä½ è¿™è‰²ç›²ç‹—ï¼äººå®¶å…¨è£¸æ‘†poseä½ éƒ½è®¤ä¸å‡ºï½äººå®¶è¦å“­äº†ï¼(//Ï‰//)'
    ]
};

function getRandomComment(level) {
    const list = comments[level];
    return list[Math.floor(Math.random() * list.length)];
}

function startJudgementTimer(reset = true) {
    clearInterval(gameTimer);
    if (reset) timeLeft = 60;
    timerDisplay.textContent = `å‰©ä½™æ—¶é—´ï¼š${timeLeft}ç§’`;
    resultDisplay.textContent = '';
    resultDisplay.classList.remove('show');
    gameTimer = setInterval(() => {
        timeLeft--;
        timerDisplay.textContent = `å‰©ä½™æ—¶é—´ï¼š${timeLeft}ç§’`;
        if (timeLeft <= 0) {
            clearInterval(gameTimer);
            gameTimer = null;
            optionsContainer.innerHTML = '';

            let level = '';
            if (judgementScore >= 24) level = 'perfect';
            else if (judgementScore >= 18) level = 'excellent';
            else if (judgementScore >= 14) level = 'good';
            else if (judgementScore >= 10) level = 'average';
            else if (judgementScore >= 5) level = 'poor';
            else level = 'terrible';

            const comment = getRandomComment(level);

            resultDisplay.innerHTML = `
                <div style="font-size:1.9rem; margin-bottom:12px; color:#ff4081;">
                    æ¸¸æˆç»“æŸï¼å¾—åˆ†ï¼š<span style="color:#ff6b9d; font-weight:bold;">${judgementScore}</span>
                </div>
                <div style="font-size:1.3rem; line-height:1.7;">
                    ${comment.split('ï½').map(line => line ? `<div class="comment-line">${line}ï½</div>` : '').join('')}
                </div>
            `;
            setTimeout(() => {
                resultDisplay.classList.add('show');
            }, 100);
        }
    }, 1000);
}

restartJudgement.addEventListener('click', () => {
    judgementScore = 0;
    scoreDisplay.textContent = `å¾—åˆ†ï¼š${judgementScore}`;
    startJudgementTimer();
    startJudgementRound();
});

startJudgementTimer();
startJudgementRound();

// ä¸»é¢˜åˆ‡æ¢
const themeToggle = document.getElementById('theme-toggle');
const prefersDarkScheme = window.matchMedia('(prefers-color-scheme: dark)');

const currentTheme = localStorage.getItem('theme');
if (currentTheme === 'dark') {
    document.body.classList.add('dark-theme');
    themeToggle.textContent = 'â˜€ï¸ æœéœç¼ ç»µ';
} else if (currentTheme === 'light') {
    document.body.classList.remove('dark-theme');
    themeToggle.textContent = 'ğŸŒ™ æš®è‰²ç¼ ç»µ';
} else if (prefersDarkScheme.matches) {
    document.body.classList.add('dark-theme');
    themeToggle.textContent = 'â˜€ï¸ æœéœç¼ ç»µ';
}

themeToggle.addEventListener('click', () => {
    document.body.classList.toggle('dark-theme');
    
    if (document.body.classList.contains('dark-theme')) {
        localStorage.setItem('theme', 'dark');
        themeToggle.textContent = 'â˜€ï¸ æœéœç¼ ç»µ';
    } else {
        localStorage.setItem('theme', 'light');
        themeToggle.textContent = 'ğŸŒ™ æš®è‰²ç¼ ç»µ';
    }
});
</script>

</body>
</html>